{"version":3,"file":"vega-embed.module.js","sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/regenerator/index.js","../node_modules/yallist/yallist.js","../node_modules/lru-cache/index.js","../node_modules/semver/internal/parse-options.js","../node_modules/semver/internal/constants.js","../node_modules/semver/internal/debug.js","../node_modules/semver/internal/re.js","../node_modules/semver/internal/identifiers.js","../node_modules/semver/classes/semver.js","../node_modules/semver/functions/compare.js","../node_modules/semver/functions/eq.js","../node_modules/semver/functions/neq.js","../node_modules/semver/functions/gt.js","../node_modules/semver/functions/gte.js","../node_modules/semver/functions/lt.js","../node_modules/semver/functions/lte.js","../node_modules/semver/functions/cmp.js","../node_modules/semver/classes/comparator.js","../node_modules/semver/classes/range.js","../node_modules/semver/functions/satisfies.js","../src/post.ts","../src/style.ts","../src/util.ts","../src/embed.ts"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar Op = Object.prototype;\nvar hasOwn = Op.hasOwnProperty;\nvar undefined; // More compressible than void 0.\nvar $Symbol = typeof Symbol === \"function\" ? Symbol : {};\nvar iteratorSymbol = $Symbol.iterator || \"@@iterator\";\nvar asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\nvar toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\nfunction wrap(innerFn, outerFn, self, tryLocsList) {\n  // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n  var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n  var generator = Object.create(protoGenerator.prototype);\n  var context = new Context(tryLocsList || []);\n\n  // The ._invoke method unifies the implementations of the .next,\n  // .throw, and .return methods.\n  generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n  return generator;\n}\n\n// Try/catch helper to minimize deoptimizations. Returns a completion\n// record like context.tryEntries[i].completion. This interface could\n// have been (and was previously) designed to take a closure to be\n// invoked without arguments, but in all the cases we care about we\n// already have an existing method we want to call, so there's no need\n// to create a new function object. We can even get away with assuming\n// the method takes exactly one argument, since that happens to be true\n// in every case, so we don't have to touch the arguments object. The\n// only additional allocation required is the completion record, which\n// has a stable shape and so hopefully should be cheap to allocate.\nfunction tryCatch(fn, obj, arg) {\n  try {\n    return { type: \"normal\", arg: fn.call(obj, arg) };\n  } catch (err) {\n    return { type: \"throw\", arg: err };\n  }\n}\n\nvar GenStateSuspendedStart = \"suspendedStart\";\nvar GenStateSuspendedYield = \"suspendedYield\";\nvar GenStateExecuting = \"executing\";\nvar GenStateCompleted = \"completed\";\n\n// Returning this object from the innerFn has the same effect as\n// breaking out of the dispatch switch statement.\nvar ContinueSentinel = {};\n\n// Dummy constructor functions that we use as the .constructor and\n// .constructor.prototype properties for functions that return Generator\n// objects. For full spec compliance, you may wish to configure your\n// minifier not to mangle the names of these two functions.\nfunction Generator() {}\nfunction GeneratorFunction() {}\nfunction GeneratorFunctionPrototype() {}\n\n// This is a polyfill for %IteratorPrototype% for environments that\n// don't natively support it.\nvar IteratorPrototype = {};\nIteratorPrototype[iteratorSymbol] = function () {\n  return this;\n};\n\nvar getProto = Object.getPrototypeOf;\nvar NativeIteratorPrototype = getProto && getProto(getProto(values([])));\nif (NativeIteratorPrototype &&\n  NativeIteratorPrototype !== Op &&\n  hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n  // This environment has a native %IteratorPrototype%; use it instead\n  // of the polyfill.\n  IteratorPrototype = NativeIteratorPrototype;\n}\n\nvar Gp = GeneratorFunctionPrototype.prototype =\n  Generator.prototype = Object.create(IteratorPrototype);\nGeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\nGeneratorFunctionPrototype.constructor = GeneratorFunction;\nGeneratorFunctionPrototype[toStringTagSymbol] =\n  GeneratorFunction.displayName = \"GeneratorFunction\";\n\n// Helper for defining the .next, .throw, and .return methods of the\n// Iterator interface in terms of a single ._invoke method.\nfunction defineIteratorMethods(prototype) {\n  [\"next\", \"throw\", \"return\"].forEach(function(method) {\n    prototype[method] = function(arg) {\n      return this._invoke(method, arg);\n    };\n  });\n}\n\nfunction isGeneratorFunction (genFun) {\n  var ctor = typeof genFun === \"function\" && genFun.constructor;\n  return ctor\n    ? ctor === GeneratorFunction ||\n    // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n    : false;\n};\n\nfunction mark (genFun) {\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n  } else {\n    genFun.__proto__ = GeneratorFunctionPrototype;\n    if (!(toStringTagSymbol in genFun)) {\n      genFun[toStringTagSymbol] = \"GeneratorFunction\";\n    }\n  }\n  genFun.prototype = Object.create(Gp);\n  return genFun;\n};\n\n// Within the body of any async function, `await x` is transformed to\n// `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n// `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n// meant to be awaited.\nfunction awrap (arg) {\n  return { __await: arg };\n};\n\nfunction AsyncIterator(generator, PromiseImpl) {\n  function invoke(method, arg, resolve, reject) {\n    var record = tryCatch(generator[method], generator, arg);\n    if (record.type === \"throw\") {\n      reject(record.arg);\n    } else {\n      var result = record.arg;\n      var value = result.value;\n      if (value &&\n        typeof value === \"object\" &&\n        hasOwn.call(value, \"__await\")) {\n        return PromiseImpl.resolve(value.__await).then(function(value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function(err) {\n          invoke(\"throw\", err, resolve, reject);\n        });\n      }\n\n      return PromiseImpl.resolve(value).then(function(unwrapped) {\n        // When a yielded Promise is resolved, its final value becomes\n        // the .value of the Promise<{value,done}> result for the\n        // current iteration.\n        result.value = unwrapped;\n        resolve(result);\n      }, function(error) {\n        // If a rejected Promise was yielded, throw the rejection back\n        // into the async generator function so it can be handled there.\n        return invoke(\"throw\", error, resolve, reject);\n      });\n    }\n  }\n\n  var previousPromise;\n\n  function enqueue(method, arg) {\n    function callInvokeWithMethodAndArg() {\n      return new PromiseImpl(function(resolve, reject) {\n        invoke(method, arg, resolve, reject);\n      });\n    }\n\n    return previousPromise =\n      // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(\n        callInvokeWithMethodAndArg,\n        // Avoid propagating failures to Promises returned by later\n        // invocations of the iterator.\n        callInvokeWithMethodAndArg\n      ) : callInvokeWithMethodAndArg();\n  }\n\n  // Define the unified helper method that is used to implement .next,\n  // .throw, and .return (see defineIteratorMethods).\n  this._invoke = enqueue;\n}\n\ndefineIteratorMethods(AsyncIterator.prototype);\nAsyncIterator.prototype[asyncIteratorSymbol] = function () {\n  return this;\n};\n\n// Note that simple async functions are implemented on top of\n// AsyncIterator objects; they just return a Promise for the value of\n// the final result produced by the iterator.\n function async (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n  if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n  var iter = new AsyncIterator(\n    wrap(innerFn, outerFn, self, tryLocsList),\n    PromiseImpl\n  );\n\n  return isGeneratorFunction(outerFn)\n    ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function(result) {\n      return result.done ? result.value : iter.next();\n    });\n};\n\nfunction makeInvokeMethod(innerFn, self, context) {\n  var state = GenStateSuspendedStart;\n\n  return function invoke(method, arg) {\n    if (state === GenStateExecuting) {\n      throw new Error(\"Generator is already running\");\n    }\n\n    if (state === GenStateCompleted) {\n      if (method === \"throw\") {\n        throw arg;\n      }\n\n      // Be forgiving, per 25.3.3.3.3 of the spec:\n      // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n      return doneResult();\n    }\n\n    context.method = method;\n    context.arg = arg;\n\n    while (true) {\n      var delegate = context.delegate;\n      if (delegate) {\n        var delegateResult = maybeInvokeDelegate(delegate, context);\n        if (delegateResult) {\n          if (delegateResult === ContinueSentinel) continue;\n          return delegateResult;\n        }\n      }\n\n      if (context.method === \"next\") {\n        // Setting context._sent for legacy support of Babel's\n        // function.sent implementation.\n        context.sent = context._sent = context.arg;\n\n      } else if (context.method === \"throw\") {\n        if (state === GenStateSuspendedStart) {\n          state = GenStateCompleted;\n          throw context.arg;\n        }\n\n        context.dispatchException(context.arg);\n\n      } else if (context.method === \"return\") {\n        context.abrupt(\"return\", context.arg);\n      }\n\n      state = GenStateExecuting;\n\n      var record = tryCatch(innerFn, self, context);\n      if (record.type === \"normal\") {\n        // If an exception is thrown from innerFn, we leave state ===\n        // GenStateExecuting and loop back for another invocation.\n        state = context.done\n          ? GenStateCompleted\n          : GenStateSuspendedYield;\n\n        if (record.arg === ContinueSentinel) {\n          continue;\n        }\n\n        return {\n          value: record.arg,\n          done: context.done\n        };\n\n      } else if (record.type === \"throw\") {\n        state = GenStateCompleted;\n        // Dispatch the exception by looping back around to the\n        // context.dispatchException(context.arg) call above.\n        context.method = \"throw\";\n        context.arg = record.arg;\n      }\n    }\n  };\n}\n\n// Call delegate.iterator[context.method](context.arg) and handle the\n// result, either by returning a { value, done } result from the\n// delegate iterator, or by modifying context.method and context.arg,\n// setting context.delegate to null, and returning the ContinueSentinel.\nfunction maybeInvokeDelegate(delegate, context) {\n  var method = delegate.iterator[context.method];\n  if (method === undefined) {\n    // A .throw or .return when the delegate iterator has no .throw\n    // method always terminates the yield* loop.\n    context.delegate = null;\n\n    if (context.method === \"throw\") {\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\n      if (delegate.iterator[\"return\"]) {\n        // If the delegate iterator has a return method, give it a\n        // chance to clean up.\n        context.method = \"return\";\n        context.arg = undefined;\n        maybeInvokeDelegate(delegate, context);\n\n        if (context.method === \"throw\") {\n          // If maybeInvokeDelegate(context) changed context.method from\n          // \"return\" to \"throw\", let that override the TypeError below.\n          return ContinueSentinel;\n        }\n      }\n\n      context.method = \"throw\";\n      context.arg = new TypeError(\n        \"The iterator does not provide a 'throw' method\");\n    }\n\n    return ContinueSentinel;\n  }\n\n  var record = tryCatch(method, delegate.iterator, context.arg);\n\n  if (record.type === \"throw\") {\n    context.method = \"throw\";\n    context.arg = record.arg;\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  var info = record.arg;\n\n  if (! info) {\n    context.method = \"throw\";\n    context.arg = new TypeError(\"iterator result is not an object\");\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  if (info.done) {\n    // Assign the result of the finished delegate to the temporary\n    // variable specified by delegate.resultName (see delegateYield).\n    context[delegate.resultName] = info.value;\n\n    // Resume execution at the desired location (see delegateYield).\n    context.next = delegate.nextLoc;\n\n    // If context.method was \"throw\" but the delegate handled the\n    // exception, let the outer generator proceed normally. If\n    // context.method was \"next\", forget context.arg since it has been\n    // \"consumed\" by the delegate iterator. If context.method was\n    // \"return\", allow the original .return call to continue in the\n    // outer generator.\n    if (context.method !== \"return\") {\n      context.method = \"next\";\n      context.arg = undefined;\n    }\n\n  } else {\n    // Re-yield the result returned by the delegate method.\n    return info;\n  }\n\n  // The delegate iterator is finished, so forget it and continue with\n  // the outer generator.\n  context.delegate = null;\n  return ContinueSentinel;\n}\n\n// Define Generator.prototype.{next,throw,return} in terms of the\n// unified ._invoke helper method.\ndefineIteratorMethods(Gp);\n\nGp[toStringTagSymbol] = \"Generator\";\n\n// A Generator should always return itself as the iterator object when the\n// @@iterator function is called on it. Some browsers' implementations of the\n// iterator prototype chain incorrectly implement this, causing the Generator\n// object to not be returned from this call. This ensures that doesn't happen.\n// See https://github.com/facebook/regenerator/issues/274 for more details.\nGp[iteratorSymbol] = function() {\n  return this;\n};\n\nGp.toString = function() {\n  return \"[object Generator]\";\n};\n\nfunction pushTryEntry(locs) {\n  var entry = { tryLoc: locs[0] };\n\n  if (1 in locs) {\n    entry.catchLoc = locs[1];\n  }\n\n  if (2 in locs) {\n    entry.finallyLoc = locs[2];\n    entry.afterLoc = locs[3];\n  }\n\n  this.tryEntries.push(entry);\n}\n\nfunction resetTryEntry(entry) {\n  var record = entry.completion || {};\n  record.type = \"normal\";\n  delete record.arg;\n  entry.completion = record;\n}\n\nfunction Context(tryLocsList) {\n  // The root entry object (effectively a try statement without a catch\n  // or a finally block) gives us a place to store values thrown from\n  // locations where there is no enclosing try statement.\n  this.tryEntries = [{ tryLoc: \"root\" }];\n  tryLocsList.forEach(pushTryEntry, this);\n  this.reset(true);\n}\n\nfunction keys (object) {\n  var keys = [];\n  for (var key in object) {\n    keys.push(key);\n  }\n  keys.reverse();\n\n  // Rather than returning an object with a next method, we keep\n  // things simple and return the next function itself.\n  return function next() {\n    while (keys.length) {\n      var key = keys.pop();\n      if (key in object) {\n        next.value = key;\n        next.done = false;\n        return next;\n      }\n    }\n\n    // To avoid creating an additional object, we just hang the .value\n    // and .done properties off the next function object itself. This\n    // also ensures that the minifier will not anonymize the function.\n    next.done = true;\n    return next;\n  };\n};\n\nfunction values(iterable) {\n  if (iterable) {\n    var iteratorMethod = iterable[iteratorSymbol];\n    if (iteratorMethod) {\n      return iteratorMethod.call(iterable);\n    }\n\n    if (typeof iterable.next === \"function\") {\n      return iterable;\n    }\n\n    if (!isNaN(iterable.length)) {\n      var i = -1, next = function next() {\n        while (++i < iterable.length) {\n          if (hasOwn.call(iterable, i)) {\n            next.value = iterable[i];\n            next.done = false;\n            return next;\n          }\n        }\n\n        next.value = undefined;\n        next.done = true;\n\n        return next;\n      };\n\n      return next.next = next;\n    }\n  }\n\n  // Return an iterator with no values.\n  return { next: doneResult };\n}\n\nfunction doneResult() {\n  return { value: undefined, done: true };\n}\n\nContext.prototype = {\n  constructor: Context,\n\n  reset: function(skipTempReset) {\n    this.prev = 0;\n    this.next = 0;\n    // Resetting context._sent for legacy support of Babel's\n    // function.sent implementation.\n    this.sent = this._sent = undefined;\n    this.done = false;\n    this.delegate = null;\n\n    this.method = \"next\";\n    this.arg = undefined;\n\n    this.tryEntries.forEach(resetTryEntry);\n\n    if (!skipTempReset) {\n      for (var name in this) {\n        // Not sure about the optimal order of these conditions:\n        if (name.charAt(0) === \"t\" &&\n          hasOwn.call(this, name) &&\n          !isNaN(+name.slice(1))) {\n          this[name] = undefined;\n        }\n      }\n    }\n  },\n\n  stop: function() {\n    this.done = true;\n\n    var rootEntry = this.tryEntries[0];\n    var rootRecord = rootEntry.completion;\n    if (rootRecord.type === \"throw\") {\n      throw rootRecord.arg;\n    }\n\n    return this.rval;\n  },\n\n  dispatchException: function(exception) {\n    if (this.done) {\n      throw exception;\n    }\n\n    var context = this;\n    function handle(loc, caught) {\n      record.type = \"throw\";\n      record.arg = exception;\n      context.next = loc;\n\n      if (caught) {\n        // If the dispatched exception was caught by a catch block,\n        // then let that catch block handle the exception normally.\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n      return !! caught;\n    }\n\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n      var record = entry.completion;\n\n      if (entry.tryLoc === \"root\") {\n        // Exception thrown outside of any try block that could handle\n        // it, so set the completion value of the entire function to\n        // throw the exception.\n        return handle(\"end\");\n      }\n\n      if (entry.tryLoc <= this.prev) {\n        var hasCatch = hasOwn.call(entry, \"catchLoc\");\n        var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n        if (hasCatch && hasFinally) {\n          if (this.prev < entry.catchLoc) {\n            return handle(entry.catchLoc, true);\n          } else if (this.prev < entry.finallyLoc) {\n            return handle(entry.finallyLoc);\n          }\n\n        } else if (hasCatch) {\n          if (this.prev < entry.catchLoc) {\n            return handle(entry.catchLoc, true);\n          }\n\n        } else if (hasFinally) {\n          if (this.prev < entry.finallyLoc) {\n            return handle(entry.finallyLoc);\n          }\n\n        } else {\n          throw new Error(\"try statement without catch or finally\");\n        }\n      }\n    }\n  },\n\n  abrupt: function(type, arg) {\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n      if (entry.tryLoc <= this.prev &&\n        hasOwn.call(entry, \"finallyLoc\") &&\n        this.prev < entry.finallyLoc) {\n        var finallyEntry = entry;\n        break;\n      }\n    }\n\n    if (finallyEntry &&\n      (type === \"break\" ||\n        type === \"continue\") &&\n      finallyEntry.tryLoc <= arg &&\n      arg <= finallyEntry.finallyLoc) {\n      // Ignore the finally entry if control is not jumping to a\n      // location outside the try/catch block.\n      finallyEntry = null;\n    }\n\n    var record = finallyEntry ? finallyEntry.completion : {};\n    record.type = type;\n    record.arg = arg;\n\n    if (finallyEntry) {\n      this.method = \"next\";\n      this.next = finallyEntry.finallyLoc;\n      return ContinueSentinel;\n    }\n\n    return this.complete(record);\n  },\n\n  complete: function(record, afterLoc) {\n    if (record.type === \"throw\") {\n      throw record.arg;\n    }\n\n    if (record.type === \"break\" ||\n      record.type === \"continue\") {\n      this.next = record.arg;\n    } else if (record.type === \"return\") {\n      this.rval = this.arg = record.arg;\n      this.method = \"return\";\n      this.next = \"end\";\n    } else if (record.type === \"normal\" && afterLoc) {\n      this.next = afterLoc;\n    }\n\n    return ContinueSentinel;\n  },\n\n  finish: function(finallyLoc) {\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n      if (entry.finallyLoc === finallyLoc) {\n        this.complete(entry.completion, entry.afterLoc);\n        resetTryEntry(entry);\n        return ContinueSentinel;\n      }\n    }\n  },\n\n  \"catch\": function(tryLoc) {\n    for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n      var entry = this.tryEntries[i];\n      if (entry.tryLoc === tryLoc) {\n        var record = entry.completion;\n        if (record.type === \"throw\") {\n          var thrown = record.arg;\n          resetTryEntry(entry);\n        }\n        return thrown;\n      }\n    }\n\n    // The context.catch method must only be called with a location\n    // argument that corresponds to a known catch block.\n    throw new Error(\"illegal catch attempt\");\n  },\n\n  delegateYield: function(iterable, resultName, nextLoc) {\n    this.delegate = {\n      iterator: values(iterable),\n      resultName: resultName,\n      nextLoc: nextLoc\n    };\n\n    if (this.method === \"next\") {\n      // Deliberately forget the last sent value so that we don't\n      // accidentally pass it on to the delegate.\n      this.arg = undefined;\n    }\n\n    return ContinueSentinel;\n  }\n};\n\n// Export a default namespace that plays well with Rollup\nexport default {\n  wrap,\n  isGeneratorFunction,\n  AsyncIterator,\n  mark,\n  awrap,\n  async,\n  keys,\n  values\n};\n","'use strict'\nmodule.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n\n  return next\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next\n  }\n\n  var ret = []\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value)\n    walker = this.removeNode(walker)\n  }\n  if (walker === null) {\n    walker = this.tail\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i])\n  }\n  return ret;\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction insert (self, node, value) {\n  var inserted = node === self.head ?\n    new Node(value, null, node, self) :\n    new Node(value, node, node.next, self)\n\n  if (inserted.next === null) {\n    self.tail = inserted\n  }\n  if (inserted.prev === null) {\n    self.head = inserted\n  }\n\n  self.length++\n\n  return inserted\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  Yallist.prototype[Symbol.iterator] = function* () {\n    for (let walker = this.head; walker; walker = walker.next) {\n      yield walker.value\n    }\n  }\n} catch (er) {}\n","'use strict'\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = require('yallist')\n\nconst MAX = Symbol('max')\nconst LENGTH = Symbol('length')\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator')\nconst ALLOW_STALE = Symbol('allowStale')\nconst MAX_AGE = Symbol('maxAge')\nconst DISPOSE = Symbol('dispose')\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet')\nconst LRU_LIST = Symbol('lruList')\nconst CACHE = Symbol('cache')\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet')\n\nconst naiveLength = () => 1\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor (options) {\n    if (typeof options === 'number')\n      options = { max: options }\n\n    if (!options)\n      options = {}\n\n    if (options.max && (typeof options.max !== 'number' || options.max < 0))\n      throw new TypeError('max must be a non-negative number')\n    // Kind of weird to have a default max of Infinity, but oh well.\n    const max = this[MAX] = options.max || Infinity\n\n    const lc = options.length || naiveLength\n    this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc\n    this[ALLOW_STALE] = options.stale || false\n    if (options.maxAge && typeof options.maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n    this[MAX_AGE] = options.maxAge || 0\n    this[DISPOSE] = options.dispose\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false\n    this.reset()\n  }\n\n  // resize the cache when the max changes.\n  set max (mL) {\n    if (typeof mL !== 'number' || mL < 0)\n      throw new TypeError('max must be a non-negative number')\n\n    this[MAX] = mL || Infinity\n    trim(this)\n  }\n  get max () {\n    return this[MAX]\n  }\n\n  set allowStale (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  }\n  get allowStale () {\n    return this[ALLOW_STALE]\n  }\n\n  set maxAge (mA) {\n    if (typeof mA !== 'number')\n      throw new TypeError('maxAge must be a non-negative number')\n\n    this[MAX_AGE] = mA\n    trim(this)\n  }\n  get maxAge () {\n    return this[MAX_AGE]\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator (lC) {\n    if (typeof lC !== 'function')\n      lC = naiveLength\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      })\n    }\n    trim(this)\n  }\n  get lengthCalculator () { return this[LENGTH_CALCULATOR] }\n\n  get length () { return this[LENGTH] }\n  get itemCount () { return this[LRU_LIST].length }\n\n  rforEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev\n      forEachStep(this, fn, walker, thisp)\n      walker = prev\n    }\n  }\n\n  forEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next\n      forEachStep(this, fn, walker, thisp)\n      walker = next\n    }\n  }\n\n  keys () {\n    return this[LRU_LIST].toArray().map(k => k.key)\n  }\n\n  values () {\n    return this[LRU_LIST].toArray().map(k => k.value)\n  }\n\n  reset () {\n    if (this[DISPOSE] &&\n        this[LRU_LIST] &&\n        this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value))\n    }\n\n    this[CACHE] = new Map() // hash of items by key\n    this[LRU_LIST] = new Yallist() // list of items in order of use recency\n    this[LENGTH] = 0 // length of items in the list\n  }\n\n  dump () {\n    return this[LRU_LIST].map(hit =>\n      isStale(this, hit) ? false : {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }).toArray().filter(h => h)\n  }\n\n  dumpLru () {\n    return this[LRU_LIST]\n  }\n\n  set (key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE]\n\n    if (maxAge && typeof maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n\n    const now = maxAge ? Date.now() : 0\n    const len = this[LENGTH_CALCULATOR](value, key)\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key))\n        return false\n      }\n\n      const node = this[CACHE].get(key)\n      const item = node.value\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET])\n          this[DISPOSE](key, item.value)\n      }\n\n      item.now = now\n      item.maxAge = maxAge\n      item.value = value\n      this[LENGTH] += len - item.length\n      item.length = len\n      this.get(key)\n      trim(this)\n      return true\n    }\n\n    const hit = new Entry(key, value, len, now, maxAge)\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE])\n        this[DISPOSE](key, value)\n\n      return false\n    }\n\n    this[LENGTH] += hit.length\n    this[LRU_LIST].unshift(hit)\n    this[CACHE].set(key, this[LRU_LIST].head)\n    trim(this)\n    return true\n  }\n\n  has (key) {\n    if (!this[CACHE].has(key)) return false\n    const hit = this[CACHE].get(key).value\n    return !isStale(this, hit)\n  }\n\n  get (key) {\n    return get(this, key, true)\n  }\n\n  peek (key) {\n    return get(this, key, false)\n  }\n\n  pop () {\n    const node = this[LRU_LIST].tail\n    if (!node)\n      return null\n\n    del(this, node)\n    return node.value\n  }\n\n  del (key) {\n    del(this, this[CACHE].get(key))\n  }\n\n  load (arr) {\n    // reset the cache\n    this.reset()\n\n    const now = Date.now()\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l]\n      const expiresAt = hit.e || 0\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v)\n      else {\n        const maxAge = expiresAt - now\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge)\n        }\n      }\n    }\n  }\n\n  prune () {\n    this[CACHE].forEach((value, key) => get(this, key, false))\n  }\n}\n\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key)\n  if (node) {\n    const hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE])\n        return undefined\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET])\n          node.value.now = Date.now()\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    return hit.value\n  }\n}\n\nconst isStale = (self, hit) => {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE]))\n    return false\n\n  const diff = Date.now() - hit.now\n  return hit.maxAge ? diff > hit.maxAge\n    : self[MAX_AGE] && (diff > self[MAX_AGE])\n}\n\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value\n    if (self[DISPOSE])\n      self[DISPOSE](hit.key, hit.value)\n\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\nclass Entry {\n  constructor (key, value, length, now, maxAge) {\n    this.key = key\n    this.value = value\n    this.length = length\n    this.now = now\n    this.maxAge = maxAge || 0\n  }\n}\n\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE])\n      hit = undefined\n  }\n  if (hit)\n    fn.call(thisp, hit.value, hit.key, self)\n}\n\nmodule.exports = LRUCache\n","// parse out just the options we care about so we always get a consistent\n// obj with keys in a consistent order.\nconst opts = ['includePrerelease', 'loose', 'rtl']\nconst parseOptions = options =>\n  !options ? {}\n  : typeof options !== 'object' ? { loose: true }\n  : opts.filter(k => options[k]).reduce((options, k) => {\n    options[k] = true\n    return options\n  }, {})\nmodule.exports = parseOptions\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\nmodule.exports = {\n  SEMVER_SPEC_VERSION,\n  MAX_LENGTH,\n  MAX_SAFE_INTEGER,\n  MAX_SAFE_COMPONENT_LENGTH\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const { MAX_SAFE_COMPONENT_LENGTH } = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst createToken = (name, value, isGlobal) => {\n  const index = R++\n  debug(index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '[0-9]+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*')\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', '[0-9A-Za-z-]+')\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCE', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\.0\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\.0\\.0-0\\\\s*$')\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier)\n        this.inc('pre', identifier)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier)\n        }\n        this.inc('pre', identifier)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre':\n        if (this.prerelease.length === 0) {\n          this.prerelease = [0]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            this.prerelease.push(0)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          if (this.prerelease[0] === identifier) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = [identifier, 0]\n            }\n          } else {\n            this.prerelease = [identifier, 0]\n          }\n        }\n        break\n\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.format()\n    this.raw = this.version\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (!options || typeof options !== 'object') {\n      options = {\n        loose: !!options,\n        includePrerelease: false\n      }\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    const sameDirectionIncreasing =\n      (this.operator === '>=' || this.operator === '>') &&\n      (comp.operator === '>=' || comp.operator === '>')\n    const sameDirectionDecreasing =\n      (this.operator === '<=' || this.operator === '<') &&\n      (comp.operator === '<=' || comp.operator === '<')\n    const sameSemVer = this.semver.version === comp.semver.version\n    const differentDirectionsInclusive =\n      (this.operator === '>=' || this.operator === '<=') &&\n      (comp.operator === '>=' || comp.operator === '<=')\n    const oppositeDirectionsLessThan =\n      cmp(this.semver, '<', comp.semver, options) &&\n      (this.operator === '>=' || this.operator === '>') &&\n        (comp.operator === '<=' || comp.operator === '<')\n    const oppositeDirectionsGreaterThan =\n      cmp(this.semver, '>', comp.semver, options) &&\n      (this.operator === '<=' || this.operator === '<') &&\n        (comp.operator === '>=' || comp.operator === '>')\n\n    return (\n      sameDirectionIncreasing ||\n      sameDirectionDecreasing ||\n      (sameSemVer && differentDirectionsInclusive) ||\n      oppositeDirectionsLessThan ||\n      oppositeDirectionsGreaterThan\n    )\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst {re, t} = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.format()\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First, split based on boolean or ||\n    this.raw = range\n    this.set = range\n      .split(/\\s*\\|\\|\\s*/)\n      // map the range to a 2d array of comparators\n      .map(range => this.parseRange(range.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${range}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0)\n        this.set = [first]\n      else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.format()\n  }\n\n  format () {\n    this.range = this.set\n      .map((comps) => {\n        return comps.join(' ').trim()\n      })\n      .join('||')\n      .trim()\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    range = range.trim()\n\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts = Object.keys(this.options).join(',')\n    const memoKey = `parseRange:${memoOpts}:${range}`\n    const cached = cache.get(memoKey)\n    if (cached)\n      return cached\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range, re[t.COMPARATORTRIM])\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n    // normalize spaces\n    range = range.split(/\\s+/).join(' ')\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    const compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n      // in loose mode, throw out any that are not valid comparators\n      .filter(this.options.loose ? comp => !!comp.match(compRe) : () => true)\n      .map(comp => new Comparator(comp, this.options))\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const l = rangeList.length\n    const rangeMap = new Map()\n    for (const comp of rangeList) {\n      if (isNullSet(comp))\n        return [comp]\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has(''))\n      rangeMap.delete('')\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\nmodule.exports = Range\n\nconst LRU = require('lru-cache')\nconst cache = new LRU({ max: 1000 })\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace\n} = require('../internal/re')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\nconst replaceTildes = (comp, options) =>\n  comp.trim().split(/\\s+/).map((comp) => {\n    return replaceTilde(comp, options)\n  }).join(' ')\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\nconst replaceCarets = (comp, options) =>\n  comp.trim().split(/\\s+/).map((comp) => {\n    return replaceCaret(comp, options)\n  }).join(' ')\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map((comp) => {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<')\n        pr = '-0'\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp.trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return (`${from} ${to}`).trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","import {MessageData} from './types';\n\n/**\n * Open editor url in a new window, and pass a message.\n */\nexport default function (window: Window, url: string, data: MessageData) {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const editor = window.open(url)!;\n  const wait = 10_000;\n  const step = 250;\n  const {origin} = new URL(url);\n  // eslint-disable-next-line no-bitwise\n  let count = ~~(wait / step);\n\n  function listen(evt: MessageEvent) {\n    if (evt.source === editor) {\n      count = 0;\n      window.removeEventListener('message', listen, false);\n    }\n  }\n  window.addEventListener('message', listen, false);\n\n  // send message\n  // periodically resend until ack received or timeout\n  function send() {\n    if (count <= 0) {\n      return;\n    }\n    editor.postMessage(data, origin);\n    setTimeout(send, step);\n    count -= 1;\n  }\n  setTimeout(send, step);\n}\n","// generated with build-style.sh\nexport default `.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: \"\";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid #0000;\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid #0000;\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n`;\n","import {writeConfig} from 'vega';\n\n// polyfill for IE\nif (!String.prototype.startsWith) {\n  // eslint-disable-next-line no-extend-native,func-names\n  String.prototype.startsWith = function (search, pos) {\n    return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n  };\n}\n\nexport function isURL(s: string): boolean {\n  return s.startsWith('http://') || s.startsWith('https://') || s.startsWith('//');\n}\n\nexport type DeepPartial<T> = {[P in keyof T]?: P extends unknown ? unknown : DeepPartial<T[P]>};\n\nexport function mergeDeep<T>(dest: T, ...src: readonly DeepPartial<T>[]): T {\n  for (const s of src) {\n    deepMerge_(dest, s);\n  }\n  return dest;\n}\n\nfunction deepMerge_(dest: any, src: any) {\n  for (const property of Object.keys(src)) {\n    writeConfig(dest, property, src[property], true);\n  }\n}\n","import {applyPatch, Operation} from 'fast-json-patch';\nimport stringify from 'json-stringify-pretty-compact';\n// need this import because of https://github.com/npm/node-semver/issues/381\nimport satisfies from 'semver/functions/satisfies';\nimport * as vegaImport from 'vega';\nimport {\n  AutoSize,\n  Config as VgConfig,\n  EncodeEntryName,\n  isBoolean,\n  isString,\n  Loader,\n  LoaderOptions,\n  mergeConfig,\n  Renderers,\n  Spec as VgSpec,\n  TooltipHandler,\n  View,\n} from 'vega';\nimport {expressionInterpreter} from 'vega-interpreter';\nimport * as vegaLiteImport from 'vega-lite';\nimport {Config as VlConfig, TopLevelSpec as VlSpec} from 'vega-lite';\nimport schemaParser from 'vega-schema-url-parser';\nimport * as themes from 'vega-themes';\nimport {Handler, Options as TooltipOptions} from 'vega-tooltip';\nimport post from './post';\nimport embedStyle from './style';\nimport {Config, Mode} from './types';\nimport {mergeDeep} from './util';\nimport pkg from '../package.json';\n\nexport const version = pkg.version;\n\nexport * from './types';\n\nexport const vega = vegaImport;\nexport let vegaLite = vegaLiteImport;\n\n// For backwards compatibility with Vega-Lite before v4.\nconst w = (typeof window !== 'undefined' ? window : undefined) as any;\nif (vegaLite === undefined && w?.vl?.compile) {\n  vegaLite = w.vl;\n}\n\nexport interface Actions {\n  export?: boolean | {svg?: boolean; png?: boolean};\n  source?: boolean;\n  compiled?: boolean;\n  editor?: boolean;\n}\n\nexport const DEFAULT_ACTIONS = {export: {svg: true, png: true}, source: true, compiled: true, editor: true};\n\nexport interface Hover {\n  hoverSet?: EncodeEntryName;\n  updateSet?: EncodeEntryName;\n}\n\nexport type PatchFunc = (spec: VgSpec) => VgSpec;\n\nconst I18N = {\n  CLICK_TO_VIEW_ACTIONS: 'Click to view actions',\n  COMPILED_ACTION: 'View Compiled Vega',\n  EDITOR_ACTION: 'Open in Vega Editor',\n  PNG_ACTION: 'Save as PNG',\n  SOURCE_ACTION: 'View Source',\n  SVG_ACTION: 'Save as SVG',\n};\n\nexport interface EmbedOptions<S = string, R = Renderers> {\n  bind?: HTMLElement | string;\n  actions?: boolean | Actions;\n  mode?: Mode;\n  theme?: 'excel' | 'ggplot2' | 'quartz' | 'vox' | 'dark';\n  defaultStyle?: boolean | string;\n  logLevel?: number;\n  loader?: Loader | LoaderOptions;\n  renderer?: R;\n  tooltip?: TooltipHandler | TooltipOptions | boolean;\n  patch?: S | PatchFunc | Operation[];\n  width?: number;\n  height?: number;\n  padding?: number | {left?: number; right?: number; top?: number; bottom?: number};\n  scaleFactor?: number;\n  config?: S | Config;\n  sourceHeader?: string;\n  sourceFooter?: string;\n  editorUrl?: string;\n  hover?: boolean | Hover;\n  i18n?: Partial<typeof I18N>;\n  downloadFileName?: string;\n  formatLocale?: Record<string, unknown>;\n  timeFormatLocale?: Record<string, unknown>;\n  ast?: boolean;\n  expr?: typeof expressionInterpreter;\n  viewClass?: typeof View;\n}\n\nconst NAMES: {[key in Mode]: string} = {\n  vega: 'Vega',\n  'vega-lite': 'Vega-Lite',\n};\n\nconst VERSION = {\n  vega: vega.version,\n  'vega-lite': vegaLite ? vegaLite.version : 'not available',\n};\n\nconst PREPROCESSOR: {[mode in Mode]: (spec: any, config?: Config) => VgSpec} = {\n  vega: (vgSpec: VgSpec) => vgSpec,\n  'vega-lite': (vlSpec, config) => vegaLite.compile(vlSpec as VlSpec, {config: config as VlConfig}).spec,\n};\n\nconst SVG_CIRCLES = `\n<svg viewBox=\"0 0 16 16\" fill=\"currentColor\" stroke=\"none\" stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n  <circle r=\"2\" cy=\"8\" cx=\"2\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"8\"></circle>\n  <circle r=\"2\" cy=\"8\" cx=\"14\"></circle>\n</svg>`;\n\nconst CHART_WRAPPER_CLASS = 'chart-wrapper';\n\nexport type VisualizationSpec = VlSpec | VgSpec;\n\nexport interface Result {\n  /** The Vega view. */\n  view: View;\n\n  /** The input specification. */\n  spec: VisualizationSpec;\n\n  /** The compiled and patched Vega specification. */\n  vgSpec: VgSpec;\n\n  /** Removes references to unwanted behaviors and memory leaks. Calls Vega's `view.finalize`.  */\n  finalize: () => void;\n}\n\nfunction isTooltipHandler(h?: boolean | TooltipOptions | TooltipHandler): h is TooltipHandler {\n  return typeof h === 'function';\n}\n\nfunction viewSource(source: string, sourceHeader: string, sourceFooter: string, mode: Mode) {\n  const header = `<html><head>${sourceHeader}</head><body><pre><code class=\"json\">`;\n  const footer = `</code></pre>${sourceFooter}</body></html>`;\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const win = window.open('')!;\n  win.document.write(header + source + footer);\n  win.document.title = `${NAMES[mode]} JSON Source`;\n}\n\n/**\n * Try to guess the type of spec.\n *\n * @param spec Vega or Vega-Lite spec.\n */\nexport function guessMode(spec: VisualizationSpec, providedMode?: Mode): Mode {\n  // Decide mode\n  if (spec.$schema) {\n    const parsed = schemaParser(spec.$schema);\n    if (providedMode && providedMode !== parsed.library) {\n      console.warn(\n        `The given visualization spec is written in ${NAMES[parsed.library]}, but mode argument sets ${\n          NAMES[providedMode] ?? providedMode\n        }.`\n      );\n    }\n\n    const mode = parsed.library as Mode;\n\n    if (!satisfies(VERSION[mode], `^${parsed.version.slice(1)}`)) {\n      console.warn(\n        `The input spec uses ${NAMES[mode]} ${parsed.version}, but the current version of ${NAMES[mode]} is v${VERSION[mode]}.`\n      );\n    }\n\n    return mode;\n  }\n\n  // try to guess from the provided spec\n  if (\n    'mark' in spec ||\n    'encoding' in spec ||\n    'layer' in spec ||\n    'hconcat' in spec ||\n    'vconcat' in spec ||\n    'facet' in spec ||\n    'repeat' in spec\n  ) {\n    return 'vega-lite';\n  }\n\n  if ('marks' in spec || 'signals' in spec || 'scales' in spec || 'axes' in spec) {\n    return 'vega';\n  }\n\n  return providedMode ?? 'vega';\n}\n\nfunction isLoader(o?: LoaderOptions | Loader): o is Loader {\n  return !!(o && 'load' in o);\n}\n\nfunction createLoader(opts?: Loader | LoaderOptions) {\n  return isLoader(opts) ? opts : vega.loader(opts);\n}\n\nfunction embedOptionsFromUsermeta(parsedSpec: VisualizationSpec) {\n  return (parsedSpec.usermeta as any)?.embedOptions ?? {};\n}\n\n/**\n * Embed a Vega visualization component in a web page. This function returns a promise.\n *\n * @param el        DOM element in which to place component (DOM node or CSS selector).\n * @param spec      String : A URL string from which to load the Vega specification.\n *                  Object : The Vega/Vega-Lite specification as a parsed JSON object.\n * @param opts       A JavaScript object containing options for embedding.\n */\nexport default async function embed(\n  el: HTMLElement | string,\n  spec: VisualizationSpec | string,\n  opts: EmbedOptions = {}\n): Promise<Result> {\n  let parsedSpec: VisualizationSpec;\n  let loader: Loader | undefined;\n\n  if (isString(spec)) {\n    loader = createLoader(opts.loader);\n    parsedSpec = JSON.parse(await loader.load(spec));\n  } else {\n    parsedSpec = spec;\n  }\n\n  const usermetaLoader = embedOptionsFromUsermeta(parsedSpec).loader;\n\n  // either create the loader for the first time or create a new loader if the spec has new loader options\n  if (!loader || usermetaLoader) {\n    loader = createLoader(opts.loader ?? usermetaLoader);\n  }\n\n  const usermetaOpts = await loadOpts(embedOptionsFromUsermeta(parsedSpec), loader);\n  const parsedOpts = await loadOpts(opts, loader);\n\n  const mergedOpts = {\n    ...mergeDeep(parsedOpts, usermetaOpts),\n    config: mergeConfig(parsedOpts.config ?? {}, usermetaOpts.config ?? {}),\n  };\n\n  return await _embed(el, parsedSpec, mergedOpts, loader);\n}\n\nasync function loadOpts(opt: EmbedOptions, loader: Loader): Promise<EmbedOptions<never>> {\n  const config: Config = isString(opt.config) ? JSON.parse(await loader.load(opt.config)) : opt.config ?? {};\n  const patch: PatchFunc | Operation[] = isString(opt.patch) ? JSON.parse(await loader.load(opt.patch)) : opt.patch;\n  return {\n    ...(opt as any),\n    ...(patch ? {patch} : {}),\n    ...(config ? {config} : {}),\n  };\n}\n\nfunction getRoot(el: Element) {\n  const possibleRoot = el.getRootNode ? el.getRootNode() : document;\n  return possibleRoot instanceof ShadowRoot\n    ? {root: possibleRoot, rootContainer: possibleRoot}\n    : {root: document, rootContainer: document.head ?? document.body};\n}\n\nasync function _embed(\n  el: HTMLElement | string,\n  spec: VisualizationSpec,\n  opts: EmbedOptions<never> = {},\n  loader: Loader\n): Promise<Result> {\n  const config = opts.theme ? mergeConfig(themes[opts.theme], opts.config ?? {}) : opts.config;\n\n  const actions = isBoolean(opts.actions) ? opts.actions : mergeDeep<Actions>({}, DEFAULT_ACTIONS, opts.actions ?? {});\n  const i18n = {...I18N, ...opts.i18n};\n\n  const renderer = opts.renderer ?? 'canvas';\n  const logLevel = opts.logLevel ?? vega.Warn;\n  const downloadFileName = opts.downloadFileName ?? 'visualization';\n\n  const element = typeof el === 'string' ? document.querySelector(el) : el;\n  if (!element) {\n    throw new Error(`${el} does not exist`);\n  }\n\n  if (opts.defaultStyle !== false) {\n    // Add a default stylesheet to the head of the document.\n    const ID = 'vega-embed-style';\n    const {root, rootContainer} = getRoot(element);\n    if (!root.getElementById(ID)) {\n      const style = document.createElement('style');\n      style.id = ID;\n      style.innerText =\n        opts.defaultStyle === undefined || opts.defaultStyle === true\n          ? (embedStyle ?? '').toString()\n          : opts.defaultStyle;\n      rootContainer.appendChild(style);\n    }\n  }\n\n  const mode = guessMode(spec, opts.mode);\n\n  let vgSpec: VgSpec = PREPROCESSOR[mode](spec, config);\n\n  if (mode === 'vega-lite') {\n    if (vgSpec.$schema) {\n      const parsed = schemaParser(vgSpec.$schema);\n\n      if (!satisfies(VERSION.vega, `^${parsed.version.slice(1)}`)) {\n        console.warn(`The compiled spec uses Vega ${parsed.version}, but current version is v${VERSION.vega}.`);\n      }\n    }\n  }\n\n  element.classList.add('vega-embed');\n  if (actions) {\n    element.classList.add('has-actions');\n  }\n  element.innerHTML = ''; // clear container\n\n  let container = element;\n  if (actions) {\n    const chartWrapper = document.createElement('div');\n    chartWrapper.classList.add(CHART_WRAPPER_CLASS);\n    element.appendChild(chartWrapper);\n    container = chartWrapper;\n  }\n\n  const patch = opts.patch;\n  if (patch) {\n    vgSpec = patch instanceof Function ? patch(vgSpec) : applyPatch(vgSpec, patch, true, false).newDocument;\n  }\n\n  // Set locale. Note that this is a global setting.\n  if (opts.formatLocale) {\n    vega.formatLocale(opts.formatLocale);\n  }\n\n  if (opts.timeFormatLocale) {\n    vega.timeFormatLocale(opts.timeFormatLocale);\n  }\n\n  const {ast} = opts;\n\n  // Do not apply the config to Vega when we have already applied it to Vega-Lite.\n  // This call may throw an Error if parsing fails.\n  const runtime = vega.parse(vgSpec, mode === 'vega-lite' ? {} : (config as VgConfig), {ast});\n\n  const view = new (opts.viewClass || vega.View)(runtime, {\n    loader,\n    logLevel,\n    renderer,\n    ...(ast ? {expr: (vega as any).expressionInterpreter ?? opts.expr ?? expressionInterpreter} : {}),\n  });\n\n  view.addSignalListener('autosize', (_, autosize: Exclude<AutoSize, string>) => {\n    const {type} = autosize;\n    if (type == 'fit-x') {\n      container.classList.add('fit-x');\n      container.classList.remove('fit-y');\n    } else if (type == 'fit-y') {\n      container.classList.remove('fit-x');\n      container.classList.add('fit-y');\n    } else if (type == 'fit') {\n      container.classList.add('fit-x', 'fit-y');\n    } else {\n      container.classList.remove('fit-x', 'fit-y');\n    }\n  });\n\n  if (opts.tooltip !== false) {\n    const handler = isTooltipHandler(opts.tooltip)\n      ? opts.tooltip\n      : // user provided boolean true or tooltip options\n        new Handler(opts.tooltip === true ? {} : opts.tooltip).call;\n\n    view.tooltip(handler);\n  }\n\n  let {hover} = opts;\n\n  if (hover === undefined) {\n    hover = mode === 'vega';\n  }\n\n  if (hover) {\n    const {hoverSet, updateSet} = (typeof hover === 'boolean' ? {} : hover) as Hover;\n\n    view.hover(hoverSet, updateSet);\n  }\n\n  if (opts) {\n    if (opts.width != null) {\n      view.width(opts.width);\n    }\n    if (opts.height != null) {\n      view.height(opts.height);\n    }\n    if (opts.padding != null) {\n      view.padding(opts.padding);\n    }\n  }\n\n  await view.initialize(container, opts.bind).runAsync();\n\n  let documentClickHandler: ((this: Document, ev: MouseEvent) => void) | undefined;\n\n  if (actions !== false) {\n    let wrapper = element;\n\n    if (opts.defaultStyle !== false) {\n      const details = document.createElement('details');\n      details.title = i18n.CLICK_TO_VIEW_ACTIONS;\n      element.append(details);\n\n      wrapper = details;\n      const summary = document.createElement('summary');\n      summary.innerHTML = SVG_CIRCLES;\n\n      details.append(summary);\n\n      documentClickHandler = (ev: MouseEvent) => {\n        if (!details.contains(ev.target as any)) {\n          details.removeAttribute('open');\n        }\n      };\n      document.addEventListener('click', documentClickHandler);\n    }\n\n    const ctrl = document.createElement('div');\n    wrapper.append(ctrl);\n    ctrl.classList.add('vega-actions');\n\n    // add 'Export' action\n    if (actions === true || actions.export !== false) {\n      for (const ext of ['svg', 'png'] as const) {\n        if (actions === true || actions.export === true || (actions.export as {svg?: boolean; png?: boolean})[ext]) {\n          const i18nExportAction = (i18n as {[key: string]: string})[`${ext.toUpperCase()}_ACTION`];\n          const exportLink = document.createElement('a');\n\n          exportLink.text = i18nExportAction;\n          exportLink.href = '#';\n          exportLink.target = '_blank';\n          exportLink.download = `${downloadFileName}.${ext}`;\n          // add link on mousedown so that it's correct when the click happens\n          exportLink.addEventListener('mousedown', async function (this, e) {\n            e.preventDefault();\n            const url = await view.toImageURL(ext, opts.scaleFactor);\n            this.href = url;\n          });\n\n          ctrl.append(exportLink);\n        }\n      }\n    }\n\n    // add 'View Source' action\n    if (actions === true || actions.source !== false) {\n      const viewSourceLink = document.createElement('a');\n\n      viewSourceLink.text = i18n.SOURCE_ACTION;\n      viewSourceLink.href = '#';\n      viewSourceLink.addEventListener('click', function (this, e) {\n        viewSource(stringify(spec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', mode);\n        e.preventDefault();\n      });\n\n      ctrl.append(viewSourceLink);\n    }\n\n    // add 'View Compiled' action\n    if (mode === 'vega-lite' && (actions === true || actions.compiled !== false)) {\n      const compileLink = document.createElement('a');\n\n      compileLink.text = i18n.COMPILED_ACTION;\n      compileLink.href = '#';\n      compileLink.addEventListener('click', function (this, e) {\n        viewSource(stringify(vgSpec), opts.sourceHeader ?? '', opts.sourceFooter ?? '', 'vega');\n        e.preventDefault();\n      });\n\n      ctrl.append(compileLink);\n    }\n\n    // add 'Open in Vega Editor' action\n    if (actions === true || actions.editor !== false) {\n      const editorUrl = opts.editorUrl ?? 'https://vega.github.io/editor/';\n      const editorLink = document.createElement('a');\n\n      editorLink.text = i18n.EDITOR_ACTION;\n      editorLink.href = '#';\n      editorLink.addEventListener('click', function (this, e) {\n        post(window, editorUrl, {\n          config: config as Config,\n          mode,\n          renderer,\n          spec: stringify(spec),\n        });\n        e.preventDefault();\n      });\n\n      ctrl.append(editorLink);\n    }\n  }\n\n  function finalize() {\n    if (documentClickHandler) {\n      document.removeEventListener('click', documentClickHandler);\n    }\n    view.finalize();\n  }\n\n  return {view, spec, vgSpec, finalize};\n}\n"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","Op","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","record","result","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","async","iter","next","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","length","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","yallist","Yallist","Node","list","tail","head","item","l","removeNode","node","unshiftNode","pushNode","unshift","res","shift","thisp","walker","forEachReverse","get","n","getReverse","map","mapReverse","reduce","initial","acc","reduceReverse","toArray","arr","Array","toArrayReverse","from","to","ret","sliceReverse","splice","start","deleteCount","insert","p","inserted","er","require$$0","MAX","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","UPDATE_AGE_ON_GET","naiveLength","LRUCache","options","max","Infinity","lc","stale","maxAge","dispose","noDisposeOnSet","updateAgeOnGet","mL","trim","allowStale","mA","lengthCalculator","lC","hit","itemCount","rforEach","forEachStep","k","Map","dump","isStale","v","e","now","filter","h","dumpLru","set","Date","len","has","del","Entry","peek","load","expiresAt","prune","doUse","diff","delete","lruCache","opts","parseOptions","loose","parseOptions_1","SEMVER_SPEC_VERSION","MAX_LENGTH","MAX_SAFE_INTEGER","Number","MAX_SAFE_COMPONENT_LENGTH","constants","debug","process","env","NODE_DEBUG","test","console","debug_1","require$$1","exports","module","re","src","t","R","createToken","isGlobal","index","RegExp","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCE","LONETILDE","LONECARET","numeric","compareIdentifiers","a","b","anum","bnum","rcompareIdentifiers","identifiers","require$$2","require$$3","require$$4","SemVer","version","includePrerelease","m","match","LOOSE","FULL","raw","major","minor","patch","prerelease","split","id","num","build","format","join","compare","other","compareMain","comparePre","compareBuild","inc","release","identifier","semver","compare_1","eq","eq_1","neq","neq_1","gt","gt_1","gte","gte_1","lt","lt_1","lte","lte_1","require$$5","cmp","op","cmp_1","ANY","Comparator","comp","parse","operator","r","COMPARATORLOOSE","COMPARATOR","intersects","Range","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comparator","range","parseRange","c","first","isNullSet","isAny","comps","memoOpts","memoKey","cached","cache","hr","HYPHENRANGELOOSE","HYPHENRANGE","replace","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","compRe","rangeList","parseComparator","replaceGTE0","rangeMap","size","some","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","testSet","LRU","comparators","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","toLowerCase","replaceTilde","TILDELOOSE","TILDE","_","M","pr","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","fM","fm","fp","fpr","fb","tM","tm","tp","tpr","tb","allowed","satisfies","satisfies_1"],"mappings":"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"}